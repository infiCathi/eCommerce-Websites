function makeRequestForSess(o){$.ajax({type:"POST",url:"https://wdsapp.com/APPS/shopify/loginwithsocialmedia/getshop.php?set=1",data:{shop:o},success:function(o){}})}function getParameterByName(o){var e=new RegExp("[\\?&]"+o+"=([^&#]*)").exec(window.location.search);return null==e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function login(o,e,a,i){var t={"customer[email]":o,"customer[password]":e,form_type:"customer_login",utf8:"âœ“"};return $.ajax({url:"/account/login",headers:{"Access-Control-Allow-Origin":"*"},method:"post",data:t,dataType:"html",crossDomain:!0,async:!0})}$(function(){var o=Shopify.shop;$.ajax({type:"POST",url:"https://wdsapp.com/APPS/shopify/loginwithsocialmedia/index.php/social",data:{shop:o},success:function(e){var a=window.location.pathname,i=parent.document.location.href,t="https://"+o+"/admin/themes";if("/account/login"==a&&0!=i.indexOf(t)){var s=document.getElementById("CustomerLoginForm"),n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");if(null==s){var c=$("input[name$='customer[email]']").attr("id");$("#"+c).closest("form").after(e).fadeIn("slow"),"x="==n&&(window.history.pushState("/account/login?x=","Title","/account/login"),$("#"+c).closest("form").before("<div class='errors' id='customerror'><ul><li>Your Social media account does not have configured the email address, please configure the email account on your Social media account.</li></ul></div>").fadeIn("slow"))}else $("#CustomerLoginForm").after(e).fadeIn("slow"),"x="==n&&(window.history.pushState("/account/login?x=","Title","/account/login"),$("#CustomerLoginForm").before("<div class='errors' id='customerror'><ul><li>Your Social media account does not have configured the email address, please configure the email account on your Social media account.</li></ul></div>").fadeIn("slow"))}if("/account/register"==a&&0!=i.indexOf(t))if(null==(s=document.getElementById("CustomerLoginForm"))){c=$("input[name$='customer[email]']").attr("id");$("#"+c).closest("form").after(e).fadeIn("slow")}else $("#CustomerLoginForm").after(e).fadeIn("slow");$(".social_front:not(:first)").remove()}})}),$(document).ready(function(){var o,e,a=window.location.protocol,i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=Shopify.shop,s=parent.document.location.href,n="https://"+t+"/admin/themes";o=getParameterByName("x"),e=getParameterByName("y");var c=window.location.pathname;if("x="==i[0]&&"/account/login"!=c&&(document.location.href="/account/login?x="),""!=o&&""!=e){var r=i[0].split("=")[1],l=i[1].split("=")[1];""==r&&(document.location.href="/account/login?x="),0!=s.indexOf(n)&&$.ajax({type:"POST",url:"https://wdsapp.com/APPS/shopify/loginwithsocialmedia/index.php/ajax/get_userinformation",data:{email:r,passwd:l},success:function(o){var e=jQuery.parseJSON(o),i=e.email,t=e.pass,s=Shopify.shop;if("/account/login"==window.location.pathname&&null==document.getElementById("CustomerLoginForm")){var n=$("input[name$='customer[email]']").attr("id");$("#"+n).closest("div").attr("id","CustomerLoginForm")}$("body").after("<link rel='stylesheet' type='text/css' href='https://wdsapp.com/APPS/shopify/loginwithsocialmedia/assets/css/social_media.css'/><div class='apploader'><div class='loader'></div></div>"),""==i&&(document.location.href="/account/login?x=",$("#CustomerLoginForm").before("<div class='errors' id='customerror'><ul><li>Your Social media account does not have configured the email address, please configure the email account on your Social media account.</li></ul></div>").fadeIn("slow")),login(i,t,s,a).done(function(o){$("body").after("<link rel='stylesheet' type='text/css' href='https://wdsapp.com/APPS/shopify/loginwithsocialmedia/assets/css/social_media.css'/><div class='apploader'><div class='loader'></div></div>"),-1!==o.indexOf("Invalid login credentials")?(""!=i&&$.ajax({type:"POST",url:"https://wdsapp.com/APPS/shopify/loginwithsocialmedia/index.php/ajax/updatepassword",data:{email:i,password:t,shop_url:s},success:function(o){$("body").after("<link rel='stylesheet' type='text/css' href='https://wdsapp.com/APPS/shopify/loginwithsocialmedia/assets/css/social_media.css';?> /><div class='apploader'><div class='loader'></div></div>"),login(i,t,s,a).done(function(o){-1!==o.indexOf("Invalid login credentials")?""!==i&&($(".apploader").remove(),window.history.pushState("/?x=","Title","/"),$("main").prepend("<div class='errors' id='customerror'><ul><li>There is already an account registered to "+i+". Due to security reasons we can't let you combine accounts..</li></ul></div>").fadeIn("slow")):($(".apploader").remove(),document.location.href="/account")})}}),$(".apploader").remove()):($(".apploader").remove(),document.location.href="/account")})}})}})