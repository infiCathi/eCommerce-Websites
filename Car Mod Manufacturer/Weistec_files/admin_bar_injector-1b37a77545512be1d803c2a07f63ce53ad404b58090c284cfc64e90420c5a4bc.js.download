!function(){var e=function(e){var t={exports:{}};return e.call(t.exports,t,t.exports),t.exports},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},n=function e(t,i,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(n===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:e(o,i,r)}if("value"in n)return n.value;var s=n.get;return s===undefined?undefined:s.call(r)},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(e){return e&&e.__esModule?e:{"default":e}},a=e(function(e,r){"use strict";function n(e){arguments.length>1&&arguments[1]!==undefined&&!arguments[1]?window.location.assign(e):window.open(e,"adminBarWindow")}function o(){window.location.reload()}Object.defineProperty(r,"__esModule",{value:!0}),r.redirectToUrl=n,r.refreshPage=o;var s=function(){function e(t){var r=t.targetNode,n=t.iframeRoot,o=t.iframeSrc,s=t.permanentDomain;i(this,e),this.targetNode=r,this.iframeRoot=n,this.iframeSrc=o,this.permanentDomain=s}return t(e,[{key:"createIframe",value:function(e,t){this.iframe=document.createElement("iframe"),this.iframe.setAttribute("title",e),this.iframe.setAttribute("id",t),this.iframe.setAttribute("src",this.iframeSrc),this.iframe.setAttribute("sandbox","allow-same-origin allow-scripts"),this.iframe.setAttribute("style",this.loadingStyles),this.targetNode.appendChild(this.iframe),this.target=this.iframe.contentWindow}}],[{key:"convertStylesObjectToString",value:function(e){return Object.keys(e).map(function(t){return t+": "+e[t]+";"}).join(" ")}},{key:"returnObjectValues",value:function(e){return Object.keys(e).map(function(t){return e[t]})}}]),e}();r["default"]=s});e(function(e,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f=s(a),u=function(e){function s(e){var t=e.targetNode,r=e.iframeSrc,n=e.permanentDomain;i(this,s);var a=o(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,{targetNode:t,iframeSrc:r,permanentDomain:n}));return a.POST_MESSAGE_ACTIONS={TOGGLE_BAR:"toggle_bar",SET_IFRAME_HEIGHT:"set_iframe_height",REDIRECT_TO_URL:"redirect_to_url",SET_INITIAL_STATE:"set_initial_state",OPEN_POPOVER:"open_popover",CLOSE_POPOVER:"close_popover",TEMPLATE_EDITOR_REFRESH_PAGE:'{"key":"pageRefresh"}'},a.loadingStyles=s.convertStylesObjectToString({position:"fixed",border:"none"}),a.defaultStyles=s.convertStylesObjectToString({position:"fixed",bottom:0,left:0,"z-index":2147483647,width:"100%",height:"auto",border:"none"}),a.collapsedStyles=s.convertStylesObjectToString({position:"fixed",bottom:0,left:0,"z-index":2147483647,width:"80px",height:"80px",border:"none"}),a.popoverOpenStyles=s.convertStylesObjectToString({position:"fixed",bottom:0,left:0,"z-index":2147483647,width:"100%",height:"100vh",border:"none"}),a}return r(s,e),t(s,[{key:"init",value:function(){this.postMessageBuffer=this.postMessageBuffer.bind(this),this.setInitialState=this.setInitialState.bind(this),n(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"createIframe",this).call(this,"Shopify Admin Bar","admin-bar-iframe"),this.target=this.iframe.contentWindow,window.addEventListener("message",this.postMessageBuffer)}},{key:"teardown",value:function(){window.removeEventListener("message",this.postMessageBuffer),window.removeEventListener("DOMContentLoaded",this.setInitialState)}},{key:"setInitialState",value:function(){this.isCollapsed?this.iframe.setAttribute("style",this.collapsedStyles):this.iframe.setAttribute("style",this.defaultStyles)}},{key:"postMessageBuffer",value:function(e){var t=e.data.action||e.data,i=e.data,r=i.height,n=i.url,o=i.isCollapsed,a=e.origin;!t||s.returnObjectValues(this.POST_MESSAGE_ACTIONS).indexOf(t)<0||a!=="https://"+this.permanentDomain||(t!==this.POST_MESSAGE_ACTIONS.SET_IFRAME_HEIGHT||r)&&this.postMessageHandler(t,r,n,o)}},{key:"postMessageHandler",value:function(e,t,i,r){e===this.POST_MESSAGE_ACTIONS.TOGGLE_BAR?this.isCollapsed?(this.isCollapsed=!1,this.iframe.setAttribute("style",this.defaultStyles),this.iframe.style.height=this.heightBeforeCollapse):(this.isCollapsed=!0,this.heightBeforeCollapse=this.iframe.style.height,this.iframe.setAttribute("style",this.collapsedStyles)):e===this.POST_MESSAGE_ACTIONS.SET_IFRAME_HEIGHT&&null!=t?this.iframe.style.height=t+"px":e===this.POST_MESSAGE_ACTIONS.REDIRECT_TO_URL&&null!=i?(0,a.redirectToUrl)(i):e===this.POST_MESSAGE_ACTIONS.OPEN_POPOVER?this.iframe.setAttribute("style",this.popoverOpenStyles):e===this.POST_MESSAGE_ACTIONS.CLOSE_POPOVER?this.iframe.setAttribute("style",this.defaultStyles):e===this.POST_MESSAGE_ACTIONS.SET_INITIAL_STATE?r?(this.isCollapsed=!0,this.iframe.setAttribute("style",this.collapsedStyles)):(this.isCollapsed=!1,this.iframe.setAttribute("style",this.defaultStyles)):e===this.POST_MESSAGE_ACTIONS.TEMPLATE_EDITOR_REFRESH_PAGE&&(0,a.refreshPage)()}}]),s}(f["default"]);l["default"]=u,Shopify.AdminBarInjector=null!=l["default"]?l["default"]:l})}("undefined"!=typeof global?global:"undefined"!=typeof window&&window);